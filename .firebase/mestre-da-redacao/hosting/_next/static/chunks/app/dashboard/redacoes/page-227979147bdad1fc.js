(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5256],{3604:function(e,r,t){Promise.resolve().then(t.bind(t,6467))},6467:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var a=t(9807),n=t(7694),s=t(259),o=t(2936),i=t(6976),l=t(4616),c=t(8355),d=t(9102),u=t(7862);let f=(0,t(6875).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var m=t(2787),h=t(8249),v=t(7539);function g(){let e=(0,s.useRouter)(),{user:r}=(0,l.a)(),[t,g]=(0,n.useState)([]),[x,p]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async function(){if(!r)return;let e=(0,o.hJ)(i.db,"essays"),t=(0,o.IO)(e,(0,o.ar)("userId","==",r.uid),(0,o.Xo)("submittedAt","desc")),a=(await (0,o.PL)(t)).docs.map(e=>({id:e.id,...e.data()}));g(await Promise.all(a.map(async e=>{let r="Tema n\xe3o encontrado";if(e.themeId){let t=(0,o.JU)(i.db,"essayThemes",e.themeId),a=await (0,o.QT)(t);a.exists()&&(r=a.data().title||r)}return{...e,themeTitle:r}}))),p(!1)})()},[r]),x)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Minhas Reda\xe7\xf5es"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Gerencie suas reda\xe7\xf5es enviadas"})]}),(0,a.jsx)(h.default,{href:"/dashboard/redacoes/nova",children:(0,a.jsxs)(c.z,{children:[(0,a.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Nova reda\xe7\xe3o"]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(r=>{var t,n,s,o,i,l,u,h,g;return(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.ll,{className:"text-lg",children:r.themeTitle}),(0,a.jsxs)(d.SZ,{children:["Enviada em ",null===(t=r.submittedAt)||void 0===t?void 0:t.toDate().toLocaleDateString()]})]}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat((null===(n=r.correction)||void 0===n?void 0:n.status)==="done"?"bg-green-100 text-green-800":(null===(s=r.correction)||void 0===s?void 0:s.status)==="pending"?"bg-yellow-100 text-yellow-800":(null===(o=r.correction)||void 0===o?void 0:o.status)==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null===(i=r.correction)||void 0===i?void 0:i.status)==="done"?"Corrigida":(null===(l=r.correction)||void 0===l?void 0:l.status)==="pending"?"Pendente":(null===(u=r.correction)||void 0===u?void 0:u.status)==="rejected"?"Rejeitada":"Sem corre\xe7\xe3o"})]})}),(0,a.jsxs)(d.aY,{className:"space-y-4",children:[r.theme&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(f,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:r.theme.category})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.theme.labels.map((e,r)=>(0,a.jsx)(v.C,{variant:"outline",children:e},r))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Arquivos anexados"}),(null===(g=r.correction)||void 0===g?void 0:null===(h=g.score)||void 0===h?void 0:h.total)!==void 0&&(0,a.jsxs)("span",{className:"ml-4 text-gray-700",children:["Nota: ",(0,a.jsx)("span",{className:"font-bold",children:r.correction.score.total})]})]})]}),(0,a.jsx)(d.eW,{children:(0,a.jsx)(c.z,{variant:"outline",className:"w-full",onClick:()=>e.push("/dashboard/redacoes/".concat(r.id)),children:"Ver detalhes"})})]},r.id)}),0===t.length&&(0,a.jsx)(d.Zb,{className:"col-span-full",children:(0,a.jsxs)(d.aY,{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)(m.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Nenhuma reda\xe7\xe3o enviada"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Envie sua primeira reda\xe7\xe3o para come\xe7ar a receber corre\xe7\xf5es"}),(0,a.jsx)(h.default,{href:"/dashboard/redacoes/nova",className:"mt-4",children:(0,a.jsxs)(c.z,{children:[(0,a.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Enviar reda\xe7\xe3o"]})})]})})]})]})}},7539:function(e,r,t){"use strict";t.d(r,{C:function(){return i}});var a=t(9807);t(7694);var n=t(6640),s=t(9456);let o=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:r,variant:t,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(o({variant:t}),r),...n})}},8355:function(e,r,t){"use strict";t.d(r,{d:function(){return l},z:function(){return c}});var a=t(9807),n=t(7694),s=t(2931),o=t(6640),i=t(9456);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",terciary:"bg-background border border-primary text-primary hover:bg-primary/10"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,r)=>{let{className:t,variant:n,size:o,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:n,size:o,className:t})),ref:r,...d})});c.displayName="Button"},9102:function(e,r,t){"use strict";t.d(r,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var a=t(9807),n=t(7694),s=t(9456);let o=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...n})});o.displayName="Card";let i=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...n})});i.displayName="CardHeader";let l=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...n})});l.displayName="CardTitle";let c=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...n})});d.displayName="CardContent";let u=n.forwardRef((e,r)=>{let{className:t,...n}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...n})});u.displayName="CardFooter"},4616:function(e,r,t){"use strict";t.d(r,{AuthProvider:function(){return c},a:function(){return d}});var a=t(9807),n=t(7694),s=t(2936),o=t(6976),i=t(5200);let l=(0,n.createContext)(null);function c(e){let{children:r}=e,[t,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[f,m]=(0,n.useState)(!0),[h,v]=(0,n.useState)(null),g=async e=>{try{let r=(0,s.JU)(o.db,"users",e.uid);await (0,s.oe)(r),console.log("Documento do usu\xe1rio deletado com sucesso"),await (0,i.h8)(e),console.log("Usu\xe1rio deletado do Auth com sucesso"),c(null),u(null),v(null)}catch(e){throw console.error("Erro ao limpar usu\xe1rio:",e),e}},x=async(e,r,t)=>{try{console.log("Iniciando cria\xe7\xe3o do documento do usu\xe1rio:",e.uid);let a=(0,s.JU)(o.db,"users",e.uid);if(!(await (0,s.QT)(a)).exists()){console.log("Criando novo documento para o usu\xe1rio");let n={id:e.uid,name:r,email:e.email||"",role:"student",createdAt:(0,s.Bt)(),lastLogin:(0,s.Bt)()};return console.log("Dados do novo usu\xe1rio:",n),await (0,s.pl)(a,n,{merge:!1}),console.log("Documento criado com sucesso"),await (0,s.ET)((0,s.hJ)(o.db,"subscriptions"),{userId:e.uid,type:"MESTRE_AMIGO"===t?"private":"free",status:"active",createdAt:(0,s.Bt)(),updatedAt:(0,s.Bt)(),tokens:{available:0,unlimited:"MESTRE_AMIGO"===t}}),console.log("Assinatura criada com sucesso"),v("student"),u(r),n}return null}catch(e){throw console.error("Erro ao criar documento do usu\xe1rio:",e),e}},p=async e=>{try{let r=await (0,s.QT)((0,s.JU)(o.db,"users",e));if(r.exists()){let e=r.data();return u(e.name),v(e.role),e}return null}catch(e){return console.error("Erro ao buscar dados do usu\xe1rio:",e),null}};return(0,n.useEffect)(()=>{let e=o.I8.onAuthStateChanged(async e=>{console.log("Auth state changed, user:",null==e?void 0:e.uid),c(e),m(!0);try{e?await p(e.uid)||(u(null),v(null)):(u(null),v(null),console.log("User logged out, role set to null"))}catch(e){console.error("Erro ao carregar dados do usu\xe1rio:",e),v(null),u(null)}finally{m(!1)}});return()=>e()},[]),(0,a.jsx)(l.Provider,{value:{user:t,userName:d,loading:f,role:h,createUserDocument:x,cleanupUserOnError:g,fetchUserData:p,updateLastLogin:e=>{let r=(0,s.JU)(o.db,"users",e);(0,s.pl)(r,{lastLogin:(0,s.Bt)()},{merge:!0}).catch(e=>{console.error("Erro ao atualizar lastLogin:",e)})}},children:r})}function d(){let e=(0,n.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},6976:function(e,r,t){"use strict";let a,n,s;t.d(r,{I8:function(){return a},db:function(){return n},tO:function(){return s}});var o=t(3631),i=t(3797),l=t(5200),c=t(2936),d=t(9542);let u={apiKey:"AIzaSyABZJxTb4i_SDIBE-j530FN1cGBwmkB054",authDomain:"mestre-da-redacao.firebaseapp.com",projectId:"mestre-da-redacao",storageBucket:"mestre-da-redacao.firebasestorage.app",messagingSenderId:"326080016742",appId:"1:326080016742:web:239aa8c38ec32dcfe018a7"};console.log("Configura\xe7\xe3o do Firebase:",{...u,apiKey:"***"});let f=(0,o.ZF)(u),m=null;try{console.log("App Firebase inicializado:",f.name),m=(0,i.IH)(f),a=(0,l.v0)(f),n=(0,c.ad)(f),s=(0,d.getStorage)(f),console.log("Servi\xe7os Firebase inicializados:",{auth:!!a,db:!!n,analytics:!!m,storage:!!s})}catch(e){throw console.error("Erro ao inicializar Firebase:",e),e}},9456:function(e,r,t){"use strict";t.d(r,{cn:function(){return s}});var a=t(8223),n=t(6257);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,n.m6)((0,a.W)(r))}},6875:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var a=t(7694);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...f}=e;return(0,a.createElement)("svg",{ref:r,...o,width:n,height:n,stroke:t,strokeWidth:l?24*Number(i)/Number(n):i,className:s("lucide",c),...f},[...u.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),l=(e,r)=>{let t=(0,a.forwardRef)((t,o)=>{let{className:l,...c}=t;return(0,a.createElement)(i,{ref:o,iconNode:r,className:s("lucide-".concat(n(e)),l),...c})});return t.displayName="".concat(e),t}},2787:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(6875).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},7862:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(6875).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8249:function(e,r,t){"use strict";t.d(r,{default:function(){return n.a}});var a=t(8837),n=t.n(a)},259:function(e,r,t){"use strict";var a=t(2779);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},6640:function(e,r,t){"use strict";t.d(r,{j:function(){return o}});var a=t(8223);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=a.W,o=(e,r)=>t=>{var a;if((null==r?void 0:r.variants)==null)return s(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:o,defaultVariants:i}=r,l=Object.keys(o).map(e=>{let r=null==t?void 0:t[e],a=null==i?void 0:i[e];if(null===r)return null;let s=n(r)||n(a);return o[e][s]}),c=t&&Object.entries(t).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return s(e,l,null==r?void 0:null===(a=r.compoundVariants)||void 0===a?void 0:a.reduce((e,r)=>{let{class:t,className:a,...n}=r;return Object.entries(n).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...i,...c}[r]):({...i,...c})[r]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}}},function(e){e.O(0,[5453,291,3727,5624,8837,4315,514,1744],function(){return e(e.s=3604)}),_N_E=e.O()}]);